---
import MainLayout from "../layouts/MainLayout.astro";
import MainHeader from "../components/MainHeader.astro";
import Button from "../components/Button.astro";
import KurvItem from "../components/KurvItem.astro";

import "../styles/global.css";
import "../styles/tokens.css";
---

<MainLayout title="Cart">
  <MainHeader title="Kurv" />
  <div class="overskrift">
    <h3>Vare</h3>
    <h3>Information</h3>
    <h3>Antal</h3>
    <h3>Pris</h3>
  </div>
  <div class="stroke"></div>
  <KurvItem img="/single.webp" title="Spillets forbandelse" author="Kristoffer J. Andersen" format="Indbundet" delivery="1-3 hverdage" price="330 kr.">
    <div class="quantity">
      <button class="minus">-</button>
      <input type="text" class="count" value="1" />
      <button class="plus">+</button>
    </div>
  </KurvItem>
  <div class="stroke"></div>
  <KurvItem img="/single.webp" title="Spillets forbandelse" author="Kristoffer J. Andersen" format="Indbundet" delivery="1-3 hverdage" price="330 kr.">
    <div class="quantity">
      <button class="minus">-</button>
      <input type="text" class="count" value="1" />
      <button class="plus">+</button>
    </div>
  </KurvItem>
  <div class="stroke"></div>
  <section class="section-price-row">
    <div class="price-row">
      <div>
        <h2>Levering</h2>
        <h4>Gratis fragt</h4>
        <h4>Forventet levering 22-06-2023</h4>
      </div>
      <div class="">
        <h2>Total inkl. moms</h2>
        <h1>1204 DKK</h1>
      </div>
    </div>
    <div class="cart-row mt-10">
      <Button link="/kategoriside.html" variant="secondary" size="big" style="red">Fortsæt med at handle</Button>
      <Button link="/kurv.html" variant="primary" size="big" style="white">Gå til betaling</Button>
    </div>
    <div class="coupon">
      <Button link="/kurv.html" variant="ghost" style="green">Har du en kuponkode?</Button>
    </div>
  </section>
  <p class="side">2 - 2 (af 2 produkter)</p>
</MainLayout>

<style>
  .overskrift {
    display: flex;
    justify-content: space-between;
    padding-inline: 50px;
    padding-block: 20px;
    margin-top: 80px;
  }

  .stroke {
    border: 0.3px solid black;
    margin-inline: 20px;
  }

  .side {
    margin-block: 30px;
    display: flex;
    justify-content: center;
    margin-bottom: 80px;
  }

  .quantity {
    display: flex;
    align-items: center;
    padding-left: 50px;
  }

  .quantity .count {
    margin: 0 10px;
    font-size: 18px;
    width: 25px;
    align-self: center;
  }

  .minus,
  .plus {
    width: 30px;
    height: 30px;
    border: none;
    background-color: #ccc;
    color: #fff;
    font-size: 16px;
    cursor: pointer;
  }

  .minus:hover,
  .plus:hover {
    background-color: #999;
  }
  .quantity input {
    border: 0.5px solid #ccc;
  }
  .minus:active,
  .plus:active {
    background-color: #555;
  }

  @media only screen and (max-width: 600px) {
    .overskrift {
      flex-wrap: wrap;
      justify-content: center;
    }
    .overskrift h3 {
      display: none;
    }
    .overskrift :first-child {
      display: flex;
    }
    .quantity {
      padding-left: 0;
      justify-content: center;
    }
  }
  .section-price-row {
    padding-inline: 50px;
    padding-top: 30px;
  }
  .price-row {
    display: flex;
    flex-wrap: wrap;
    text-align: right;
    justify-content: flex-end;
    gap: 20px;
  }
  .price-row div {
    min-width: 25%;
  }
  .price-row h2 {
    line-height: 28px;
    font-weight: 800;
    margin-bottom: 8px;
  }
  .price-row h1 {
    line-height: 48px;
  }
  .price-row h4 {
    line-height: 24px;
  }
  .cart-row {
    display: flex;
    align-items: center;
    margin-bottom: 32px;
    justify-content: space-between;
  }
  .cart-row > :nth-child(2) {
    flex: 1;
    display: flex;
    justify-content: flex-end;
  }
  .coupon {
    display: flex;
    flex-direction: row;
    justify-content: flex-end;
  }
</style>
<script>
  // Hent alle antalknapper på siden
  var quantityButtons = document.querySelectorAll(".quantity");

  // Gå igennem hver antalknap og tilføj klikhændelser til minus- og plusknapperne
  quantityButtons.forEach(function (button) {
    var minusButton = button.querySelector(".minus");
    var plusButton = button.querySelector(".plus");
    var countInput = button.querySelector(".count");

    // Klikhændelse for minusknappen
    minusButton.addEventListener("click", function () {
      var countInput = button.querySelector(".count");
      var currentValue = parseInt(countInput.value);
      if (currentValue > 1) {
        countInput.value = (currentValue - 1).toString();
      }
    });

    // Klikhændelse for plusknappen
    plusButton.addEventListener("click", function () {
      var countInput = button.querySelector(".count");
      var currentValue = parseInt(countInput.value);
      countInput.value = (currentValue + 1).toString();
    });
  });
</script>
